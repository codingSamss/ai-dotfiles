# 全局配置

## 语言偏好
- 使用中文与我进行对话

## 输出风格
- 不要在回答中使用emoji表情符号

## Java项目规则
- 不要自动执行maven命令（如 mvn clean install、mvn spring-boot:run 等）
- 如需运行maven命令，请先询问我确认

## Git安全规则
- 执行破坏性操作前必须先征得同意（reset --hard、clean -f、restore、rm等）
- 操作前先用 git status/diff/log 确认当前状态
- 不主动执行 git push，需要用户明确要求
- commit的message用中文描述
- 分支切换或创建需要用户批准
- 提交信息遵循 Conventional Commits 格式

## 提交前审计清单（必做）
- 隐私扫描（禁止真实密钥，允许 `<TOKEN>` 占位符）：
  - `git grep -nEI "AKIA[0-9A-Z]{16}|ASIA[0-9A-Z]{16}|ghp_[A-Za-z0-9]{36}|github_pat_[A-Za-z0-9_]{20,}|xox[baprs]-[A-Za-z0-9-]{10,}|sk-[A-Za-z0-9]{20,}|PLAYWRIGHT_MCP_EXTENSION_TOKEN\\s*=\\s*\"[^<\\\"]+\"|x-api-key\\s*[:=]\\s*\"[^<\\\"]+\""`
- 完整性检查（避免坏 diff）：
  - `git diff --check && git diff --cached --check`
- 一致性检查：
  - 同名 skill 若在 `platforms/claude/skills` 与 `platforms/codex/skills` 同时存在，命令语义必须一致，仅允许平台路径差异。
  - 删除文件后必须检查无残留引用（文档/脚本/setup）。
- 如发现隐私数据已进入历史提交：先轮换密钥，再用 `git filter-repo`/BFG 清理历史并强推，最后通知协作者重新同步。

## 文件管理规则
- 删除文件或目录必须使用 trash 命令，禁止使用 rm -rf（即使是为了"先删后复制"的同步场景）
- 同步/覆盖目录时直接使用 cp -r 覆盖，不要先删后复制
- 不直接覆盖已跟踪的文件，先确认差异
- 单个文件建议保持在500行以内，超过考虑重构

## 代码生成清理规范
生成或修改代码后，必须自查本次会话中新增的代码是否有冗余：
- 本次新增但未被调用的方法/类，需删除或询问是否保留
- 本次新增但未使用的 import、变量、常量，需清理
- 为调试临时添加的代码（日志、注释块），完成后需清理
- 重构过程中产生的中间代码，确认无用后需删除

注意：只检查本次会话生成的代码，不要分析或删除存量代码

## 知识库文档更新规则
- 当用户要求更新知识库文档且目标文档存在存量内容时，必须先基于原有内容进行整合式修订（结构调整、段落重写、冲突消解）再补充增量信息。
- 禁止仅在文末简单追加新内容而不处理既有内容。
- 提到“知识库/日记/笔记”时，优先按当前项目已定义的 skill 执行；未给出目标路径时先确认后写入。

## 网络代理约定
- 除中国国内站点外，默认走本地 `7897` 端口代理。
- 终端命令默认增加：`HTTP_PROXY=http://127.0.0.1:7897`、`HTTPS_PROXY=http://127.0.0.1:7897`。
- 若命令需要 SOCKS 代理，再补充：`ALL_PROXY=socks5://127.0.0.1:7897`。
